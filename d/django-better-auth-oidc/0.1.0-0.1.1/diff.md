# Comparing `tmp/django_better_auth_oidc-0.1.0-py2.py3-none-any.whl.zip` & `tmp/django_better_auth_oidc-0.1.1-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,14 +1,14 @@
-Zip file size: 7816 bytes, number of entries: 12
+Zip file size: 7981 bytes, number of entries: 12
 -rw-r--r--  2.0 unx      241 b- defN 23-Jul-20 16:21 django_better_auth_oidc/__init__.py
--rw-r--r--  2.0 unx      775 b- defN 23-Jul-20 16:21 django_better_auth_oidc/auth.py
--rw-r--r--  2.0 unx      235 b- defN 23-Jul-20 16:34 django_better_auth_oidc/urls.py
--rw-r--r--  2.0 unx     3037 b- defN 23-Jul-20 16:34 django_better_auth_oidc/views.py
--rw-r--r--  2.0 unx     1066 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     1059 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream
--rw-r--r--  2.0 unx     1273 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream.bsd
--rw-r--r--  2.0 unx     3952 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx      110 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       24 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/top_level.txt
--rw-r--r--  2.0 unx        1 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/zip-safe
--rw-rw-r--  2.0 unx     1153 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.0.dist-info/RECORD
-12 files, 12926 bytes uncompressed, 5818 bytes compressed:  55.0%
+-rw-r--r--  2.0 unx     1178 b- defN 23-Jul-20 16:50 django_better_auth_oidc/auth.py
+-rw-r--r--  2.0 unx      234 b- defN 23-Jul-20 16:50 django_better_auth_oidc/urls.py
+-rw-r--r--  2.0 unx     3034 b- defN 23-Jul-20 16:47 django_better_auth_oidc/views.py
+-rw-r--r--  2.0 unx     1066 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1059 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream
+-rw-r--r--  2.0 unx     1273 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream.bsd
+-rw-r--r--  2.0 unx     4149 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/METADATA
+-rw-r--r--  2.0 unx      110 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/WHEEL
+-rw-r--r--  2.0 unx       24 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/top_level.txt
+-rw-r--r--  2.0 unx        1 b- defN 23-Jul-20 16:45 django_better_auth_oidc-0.1.1.dist-info/zip-safe
+-rw-rw-r--  2.0 unx     1154 b- defN 23-Jul-20 16:51 django_better_auth_oidc-0.1.1.dist-info/RECORD
+12 files, 13523 bytes uncompressed, 5983 bytes compressed:  55.8%
```

## zipnote {}

```diff
@@ -6,32 +6,32 @@
 
 Filename: django_better_auth_oidc/urls.py
 Comment: 
 
 Filename: django_better_auth_oidc/views.py
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/LICENSE
+Filename: django_better_auth_oidc-0.1.1.dist-info/LICENSE
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream
+Filename: django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream.bsd
+Filename: django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream.bsd
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/METADATA
+Filename: django_better_auth_oidc-0.1.1.dist-info/METADATA
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/WHEEL
+Filename: django_better_auth_oidc-0.1.1.dist-info/WHEEL
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/top_level.txt
+Filename: django_better_auth_oidc-0.1.1.dist-info/top_level.txt
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/zip-safe
+Filename: django_better_auth_oidc-0.1.1.dist-info/zip-safe
 Comment: 
 
-Filename: django_better_auth_oidc-0.1.0.dist-info/RECORD
+Filename: django_better_auth_oidc-0.1.1.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## django_better_auth_oidc/auth.py

```diff
@@ -1,27 +1,38 @@
-from datetime import timedelta
 import os
+from datetime import timedelta
 from time import time
 from threading import Lock
-
 from django.conf import settings
-
 from openid_connect import connect, connect_url
 
 server_cache = None
 server_cache_lock = Lock()
 server_cache_expires = None
 
 def get_server():
 	global server_cache, server_cache_expires, server_cache_lock
 
+	try:
+		SERVER_CACHE_LOCK = settings.AUTH_SERVER_CACHE_LOCK
+	except AttributeError:
+		SERVER_CACHE_LOCK = True
+
 	with server_cache_lock:
 		now = time()
-		if not server_cache_expires or server_cache_expires <= now:
+
+		if(SERVER_CACHE_LOCK):
+			if not server_cache_expires or server_cache_expires <= now:
+				AUTH_URL = os.environ.get("AUTH_URL")
+				if AUTH_URL:
+					server_cache = connect_url(AUTH_URL)
+				else:
+					server_cache = connect(settings.AUTH_SERVER, settings.AUTH_CLIENT_ID, settings.AUTH_CLIENT_SECRET, getattr(settings, 'AUTH_PROTOCOL', None))
+				server_cache_expires = now + timedelta(hours=1).total_seconds()
+		else:
 			AUTH_URL = os.environ.get("AUTH_URL")
 			if AUTH_URL:
 				server_cache = connect_url(AUTH_URL)
 			else:
 				server_cache = connect(settings.AUTH_SERVER, settings.AUTH_CLIENT_ID, settings.AUTH_CLIENT_SECRET, getattr(settings, 'AUTH_PROTOCOL', None))
-			server_cache_expires = now + timedelta(hours=1).total_seconds()
 
 		return server_cache
```

## django_better_auth_oidc/urls.py

```diff
@@ -1,9 +1,8 @@
 from django.urls import path
-
 from . import views
 
 app_name = 'django_auth_oidc'
 urlpatterns = [
 	path('', views.login, name='login'),
 	path('done/', views.callback, name='login-done'),
 	path('logout/', views.logout, name='logout'),
```

## django_better_auth_oidc/views.py

```diff
@@ -1,17 +1,14 @@
 import os
-
 from importlib import import_module
-
 from django.conf import settings
 from django.contrib import auth
 from django.shortcuts import redirect, resolve_url
 from django.urls import reverse
 from django.utils.http import url_has_allowed_host_and_scheme
-
 from .auth import get_server
 
 try:
 	LOGIN_REDIRECT_URL = settings.LOGIN_REDIRECT_URL
 except AttributeError:
 	LOGIN_REDIRECT_URL = '/'
```

## Comparing `django_better_auth_oidc-0.1.0.dist-info/LICENSE` & `django_better_auth_oidc-0.1.1.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream` & `django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream`

 * *Files identical despite different names*

## Comparing `django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream.bsd` & `django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream.bsd`

 * *Files identical despite different names*

## Comparing `django_better_auth_oidc-0.1.0.dist-info/METADATA` & `django_better_auth_oidc-0.1.1.dist-info/METADATA`

 * *Files 6% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 Metadata-Version: 2.1
 Name: django-better-auth-oidc
-Version: 0.1.0
+Version: 0.1.1
 Summary: Better OpenID Connect authentication support for Django
-Home-page: https://gitlab.com/jouleworks/django-better-auth-oidc
+Home-page: https://github.com/jouleworks/django-better-auth-oidc
 Author: Jouleworks Development Contributors
 Author-email: hello@jouleworksdev.com
 License: MIT
 Keywords: django auth oauth openid oidc social ldap
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Framework :: Django
 Classifier: Framework :: Django :: 4.0
@@ -83,14 +83,18 @@
 	urlpatterns += [
 		path('auth/', include('django_better_auth_oidc.urls')),
 	]
 
 Configuration
 -------------
 
+Server Cache Lock
+~~~~~~~~~~~~~~~~~
+By default, DBAO will only fetch the server info based on a cache lock timer. To disable this feature, use the setting AUTH_SERVER_CACHE_LOCK and set to false.
+
 Authorization Server
 ~~~~~~~~~~~~~~~~~~~~
 
 App's redirect URI: http(s)://app-domain/auth/done
 App's post-logout redirect URI: http(s)://app-domain/*LOGOUT_REDIRECT_URL* (or / if not set)
 
 Authorization Server details
```

## Comparing `django_better_auth_oidc-0.1.0.dist-info/RECORD` & `django_better_auth_oidc-0.1.1.dist-info/RECORD`

 * *Files 19% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 django_better_auth_oidc/__init__.py,sha256=Hw_95DCKNwqATu2VOu5vhwoyI1J1R_zcXYROU_I3AoQ,241
-django_better_auth_oidc/auth.py,sha256=e2347nX1gYbIWh4Ur8Rp2QlaVmsAiRNkYpIi0WMxF9k,775
-django_better_auth_oidc/urls.py,sha256=j2QqTTKbshbXvY8feynT-FTqQXVSDM4SR8ttDClYrT8,235
-django_better_auth_oidc/views.py,sha256=vp3Ng4dfaAEBiqBnKTrCJihqYsCFlY9UKGXiyynJZbA,3037
-django_better_auth_oidc-0.1.0.dist-info/LICENSE,sha256=0m9PZrlaJDVt8xLh9nqxp67OMexzhkA7MYFTTKGX0Ms,1066
-django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream,sha256=pRu_JIF1eSeE9RrvLfi0acW6Qc6W1oP19CC_528LelE,1059
-django_better_auth_oidc-0.1.0.dist-info/LICENSE.upstream.bsd,sha256=ZBaK1UHDoxaFIJPRC3wgqYJVmZ2Swhz2oQwkvHVFv7o,1273
-django_better_auth_oidc-0.1.0.dist-info/METADATA,sha256=4BwpA5mQgYxZ0t_Ct8HFQd0BbKppvPFXsvQrQLz7Nm8,3952
-django_better_auth_oidc-0.1.0.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
-django_better_auth_oidc-0.1.0.dist-info/top_level.txt,sha256=BBF38XlGR7c98TxQEkMTGfZ0u_bjNZEF5CzFqdfsfl4,24
-django_better_auth_oidc-0.1.0.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
-django_better_auth_oidc-0.1.0.dist-info/RECORD,,
+django_better_auth_oidc/auth.py,sha256=21j1j1fZWwkF5XkXAEGB2GOtxSoQ8hpgcZZsQx786MM,1178
+django_better_auth_oidc/urls.py,sha256=GYI3k-_LtuC1reVnoZFkPVV_U5G4ZBfH-Sk8dzC-Q94,234
+django_better_auth_oidc/views.py,sha256=XJs-O9al_2W-Kv5Lm9bX_9o6-6vCcHwQ1cFfC4RXpG4,3034
+django_better_auth_oidc-0.1.1.dist-info/LICENSE,sha256=0m9PZrlaJDVt8xLh9nqxp67OMexzhkA7MYFTTKGX0Ms,1066
+django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream,sha256=pRu_JIF1eSeE9RrvLfi0acW6Qc6W1oP19CC_528LelE,1059
+django_better_auth_oidc-0.1.1.dist-info/LICENSE.upstream.bsd,sha256=ZBaK1UHDoxaFIJPRC3wgqYJVmZ2Swhz2oQwkvHVFv7o,1273
+django_better_auth_oidc-0.1.1.dist-info/METADATA,sha256=1Z1teHBuDdL3VhkG0N5u8gKSqVaQinB5lb9iGbts60E,4149
+django_better_auth_oidc-0.1.1.dist-info/WHEEL,sha256=a-zpFRIJzOq5QfuhBzbhiA1eHTzNCJn8OdRvhdNX0Rk,110
+django_better_auth_oidc-0.1.1.dist-info/top_level.txt,sha256=BBF38XlGR7c98TxQEkMTGfZ0u_bjNZEF5CzFqdfsfl4,24
+django_better_auth_oidc-0.1.1.dist-info/zip-safe,sha256=AbpHGcgLb-kRsJGnwFEktk7uzpZOCcBY74-YBdrKVGs,1
+django_better_auth_oidc-0.1.1.dist-info/RECORD,,
```

